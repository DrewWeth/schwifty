<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="static/css/bootstrap-theme.min.css">
    <!-- Latest compiled and minified JavaScript -->
    <!-- <script src="static/js/bootstrap.min.js"></script> -->
  </head>
  <body>
    <div class="container">

      <h1>Schwifty</h1>
      <div>
        <button id="btn_go" class="btn btn-primary">
        Go!
      </button>
      </div>
      <p>
        We are using node <script>document.write(process.versions.node)</script>,
    Chrome <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>.
      </p>
      <p id="messages"></p>


      <div>
        <form id="convo">
          <input type="text" id="chat_identifier">
          <input type="submit">
        </form>

      </div>
      <div id="convo_response"></div>
    </div>


    <script>
      var ipcRenderer = require('electron').ipcRenderer;

      // document.addEventListener("message-analysis-complete", function(e){
      //     if (e.channel == "message-analysis-complete"){
      //         document.getElementById("messages").innerHTML = JSON.stringify(e);
      //     }
      // });

      document.getElementById("convo").onsubmit = function(){
        console.log("Form submitted");
        ipcRenderer.send("async-form", document.getElementById("chat_identifier").value);
        return false;
      };

      ipcRenderer.on('async-form-reply', function(event, arg) {
        console.log(arg);
        document.getElementById("convo_response").innerHTML = arg;
      });

    </script>
  </body>
</html>
